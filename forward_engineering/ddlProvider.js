"use strict";var Me=Object.defineProperty;var u=(t,n)=>Me(t,"name",{value:n,configurable:!0});var F=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports);var z=F((rt,G)=>{"use strict";G.exports={number:"BIGNUMERIC",string:"STRING",date:"DATE",timestamp:"TIMESTAMP",binary:"BYTES",boolean:"BOOL",document:"STRUCT",array:"ARRAY",objectId:"STRING",default:"STRING"}});var D=F((at,H)=>{"use strict";H.exports={ARRAY:{mode:"array"},BIGNUMERIC:{capacity:16,mode:"decimal"},BOOL:{mode:"boolean"},BYTES:{mode:"binary"},DATE:{format:"YYYY-MM-DD"},DATETIME:{format:"YYYY-MM-DD hh:mm:ss"},FLOAT64:{capacity:8,mode:"floating"},GEOGRAPHY:{format:"euclidian",mode:"geospatial"},INT64:{capacity:8},NUMERIC:{capacity:8,mode:"decimal"},STRING:{mode:"varying"},STRUCT:{mode:"object"},TIME:{format:"hh:mm:ss.nnnnnn"},TIMESTAMP:{format:"YYYY-MM-DD hh:mm:ss.nnnnnnZ"},JSON:{format:"semi-structured"}}});var Z=F((st,Q)=>{"use strict";Q.exports={createDatabase:"CREATE SCHEMA${ifNotExist} ${name}${dbOptions};\n",createTable:"CREATE ${orReplace}${temporary}${external}TABLE ${ifNotExist}${name} ${column_definitions}${partitions}${clustering}${options};\n",columnDefinition:"${name}${type}${primaryKey}${notNull}${options}",createForeignKeyConstraint:"${constraintName}FOREIGN KEY (${foreignKeys}) REFERENCES ${primaryTableName}(${primaryKeys}) NOT ENFORCED",createView:"CREATE ${orReplace}${materialized}VIEW ${ifNotExist}${name}${columns}${partitions}${clustering}${options} AS ${selectStatement};\n",dropDatabase:"DROP SCHEMA IF EXISTS ${name};",alterDatabase:"ALTER SCHEMA IF EXISTS ${name} SET ${dbOptions};",dropTable:"DROP TABLE IF EXISTS ${name};",alterTable:"ALTER TABLE IF EXISTS ${name} SET ${options};",alterColumnOptions:'ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN IF EXISTS ${columnName} SET OPTIONS( description="${description}" );',alterColumnType:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN IF EXISTS ${columnName} SET DATA TYPE ${type};",alterColumnDropNotNull:"ALTER TABLE IF EXISTS ${tableName} ALTER COLUMN IF EXISTS ${columnName} DROP NOT NULL;",alterTableAddColumn:"ALTER TABLE ${tableName} ADD COLUMN IF NOT EXISTS ${column};",alterTableDropColumn:"ALTER TABLE ${tableName} DROP COLUMN IF EXISTS ${columnName};",dropView:"DROP VIEW IF EXISTS ${name};",alterViewOptions:"ALTER ${materialized}VIEW ${name} SET ${options};"}});var q=F((ot,W)=>{"use strict";var K=u((t="")=>t.replace(/(")/gi,"\\$1").replace(/\n/gi,"\\n"),"escapeQuotes"),v=u((t="")=>`\`${t}\``,"wrapByBackticks"),ve=u(t=>t?`TIMESTAMP_TRUNC(_PARTITIONTIME, ${{"By day":"DAY","By hour":"HOUR","By month":"MONTH","By year":"YEAR"}[t]||"DAY"})`:"_PARTITIONDATE","getPartitioningByIngestionTime"),Pe=u((t={})=>{var d,T;let n=(T=(d=t.rangePartitionKey)==null?void 0:d[0])==null?void 0:T.name,i=Number(t.rangeStart),m=Number(t.rangeEnd),p=Number(t.rangeinterval);return n?`RANGE_BUCKET(${n}, GENERATE_ARRAY(${i}, ${m}${isNaN(p)?"":`, ${p}`}))`:""},"getPartitioningByIntegerRange"),Fe=u(({partitionTimeColumn:t,properties:n})=>{var i;return((i=n==null?void 0:n[t])==null?void 0:i.type)==="date"?v(t):`DATE(${v(t)})`},"getPartitioningByTimeUnitColumn"),Ye=u(({partitioning:t,timeUnitPartitionKey:n,rangeOptions:i})=>{var m,p,d,T;return t==="By time-unit column"?(m=n==null?void 0:n[0])==null?void 0:m.isActivated:t==="By integer-range"?(T=(d=(p=i==null?void 0:i[0])==null?void 0:p.rangePartitionKey)==null?void 0:d[0])==null?void 0:T.isActivated:!0},"isActivatedPartition"),Ue=u(({partitioning:t,partitioningType:n,timeUnitPartitionKey:i,rangeOptions:m,properties:p})=>{var T;let d=(T=i==null?void 0:i[0])==null?void 0:T.name;if(t==="No partitioning")return"";if(t==="By ingestion time")return"PARTITION BY "+ve(n);if(t==="By time-unit column"&&d)return"PARTITION BY "+Fe({partitionTimeColumn:d,properties:p});if(t==="By integer-range"){let l=Pe(m==null?void 0:m[0]);return l?"PARTITION BY "+l:""}return""},"getTablePartitioning"),Ke=u((t,n)=>{if(!Array.isArray(t)||t.length===0)return"";let i=t.filter(p=>p.isActivated).map(p=>v(p.name)).join(", "),m=t.filter(p=>!p.isActivated).map(p=>v(p.name)).join(", ");return n?i.length===0?`
-- CLUSTER BY `+m:m.length===0?`
CLUSTER BY `+i:`
CLUSTER BY `+i+" /*"+m+"*/":`
CLUSTER BY `+t.map(p=>v(p.name)).join(", ")},"getClusteringKey"),je=u((t,n)=>({expiration:i,partitioningFilterRequired:m,partitioning:p,customerEncryptionKey:d,description:T,labels:l,friendlyName:y,externalTableOptions:C})=>{let f=[];if(y&&f.push(`friendly_name="${y}"`),T&&f.push(`description="${K(T)}"`),i&&f.push(`expiration_timestamp=TIMESTAMP "${J(i)}"`),p==="By ingestion time"&&m&&f.push("require_partition_filter=true"),d&&f.push(`kms_key_name="${d}"`),Array.isArray(l)&&l.length&&f.push(`labels=[
${t(n(l))}
]`),C){let P=["format","bigtableUri","quote","null_marker","field_delimiter","encoding","compression","sheet_range","reference_file_schema_uri","hive_partition_uri_prefix","projection_fields","json_extension"];Object.entries(C).forEach(([o,c])=>{P.includes(o)&&(c=`"${K(c)}"`),typeof c=="boolean"&&(c=c===!0?"true":"false"),Array.isArray(c)&&(c=`[
`+c.map(E=>t(`"${E}"`)).join(`,
`)+`
]`),f.push(`${o}=${c}`)})}return f.length?`
OPTIONS (
${t(f.join(`,
`))}
)`:""},"getTableOptions"),J=u(t=>{let n=u(C=>(C+"").padStart(2,"0"),"fill"),i=new Date(Number(t)),m=n(i.getUTCDate()),p=n(i.getUTCMonth()+1),d=i.getUTCFullYear(),T=n(i.getUTCHours()),l=n(i.getUTCMinutes()),y=n(i.getUTCSeconds());return`${d}-${p}-${m} ${T}:${l}:${y} UTC`},"getTimestamp"),qe=u(t=>n=>(Array.isArray(n)||(n=[n]),n.map(i=>j(t)({type:i.type,description:i.description,dataTypeMode:i.dataTypeMode,jsonSchema:i},!0))),"convertItemsToType"),ke=u(t=>n=>Object.keys(n).map(i=>{let m=n[i];return j(t)({name:i,type:m.type,description:m.description,dataTypeMode:m.dataTypeMode,jsonSchema:m})}),"convertPropertiesToType"),Ve=u((t,n)=>{let i=[];return["bignumeric","numeric"].includes((t||"").toLowerCase())&&(n.precision&&i.push(n.precision),n.scale&&i.push(n.scale)),["string","bytes"].includes((t||"").toLowerCase())&&n.length&&i.push(n.length),i.length?`(${i.join(", ")})`:""},"addParameters"),j=u(t=>({type:n,description:i,dataTypeMode:m,name:p,jsonSchema:d},T)=>{let{assignTemplates:l,tab:y,templates:C}=t,f=n,P=d.primaryKey&&!d.compositePrimaryKey?" PRIMARY KEY NOT ENFORCED":"",o="",c="";if(n==="array")f=` ARRAY<
${y(qe(t)(d.items).join(`,
`))}
>`;else if(m==="Repeated"){let{dataTypeMode:E,..._}=d;f=j(t)({type:"array",description:i,jsonSchema:{items:[_]}})}else n==="struct"?f=` STRUCT<
${y(ke(t)(d.properties||{}).join(`,
`))}
>`:f=(" "+n).toUpperCase()+Ve(n,d);return i&&(o+=` OPTIONS( description="${K(i)}" )`),m==="Required"&&!T&&(c=" NOT NULL"),l(C.columnDefinition,{name:p&&v(p),type:f,primaryKey:P,notNull:c,options:o})},"getColumnSchema"),Xe=u((t,n)=>({columns:i,projectId:m,datasetName:p})=>{let d=i.reduce((T,l)=>{let y=v(l.name);return l.alias&&(y=`${y} as ${l.alias}`),T[l.tableName]||(T[l.tableName]={activated:[],deactivated:[]}),n&&!l.isActivated?T[l.tableName].deactivated.push(y):T[l.tableName].activated.push(y),T},{});return Object.keys(d).map(T=>{let{deactivated:l,activated:y}=d[T];return`SELECT ${y.join(", ")+(l.length?`/*, ${l.join(", ")}*/`:"")||"*"} FROM ${t(m,p,T)}`}).join(`
UNION ALL
`)},"generateViewSelectStatement"),Ge=u(t=>t.filter(n=>!!n),"clearEmptyStatements"),ze=u(t=>{let n=/[^A-Za-z0-9_]/g,i=/^[0-9]/;return(t||"").replace(n,"_").replace(i,"_")},"prepareConstraintName");W.exports={isActivatedPartition:Ye,getTablePartitioning:Ue,getClusteringKey:Ke,getTableOptions:je,getColumnSchema:j,generateViewSelectStatement:Xe,getTimestamp:J,escapeQuotes:K,clearEmptyStatements:Ge,prepareConstraintName:ze,wrapByBackticks:v}});var te=F((ct,ee)=>{"use strict";var{escapeQuotes:w,getTimestamp:He,wrapByBackticks:k}=q();ee.exports=t=>{let n=t.require("lodash"),{commentIfDeactivated:i,tab:m}=t.require("@hackolade/ddl-fe-utils").general,p=u((o,c,E)=>{let _=[];return o&&_.push(o),c&&_.push(c),E&&_.push(E),"`"+_.join(".")+"`"},"getFullName"),d=u(o=>o.map(({labelKey:c,labelValue:E})=>`("${c}", "${E}")`).join(`,
`),"getLabels"),T=u(({friendlyName:o,description:c,defaultExpiration:E,customerEncryptionKey:_,labels:R})=>{let e=[];return o&&e.push(`friendly_name="${o}"`),c&&e.push(`description="${w(c)}"`),_&&e.push(`default_kms_key_name="${_}"`),E&&e.push(`default_table_expiration_days=${E}`),R.length&&e.push(`labels=[
${m(d(R))}
]`),e.length?`
OPTIONS(
${m(e.join(`,
`))}
)`:""},"getContainerOptions"),l=u(o=>{if(!o.materialized)return[];let c=[];return o.enableRefresh&&(c.push("enable_refresh=true"),o.refreshInterval&&c.push(`refresh_interval_minutes=${o.refreshInterval}`)),o.maxStaleness&&c.push(`max_staleness=${o.maxStaleness}`),o.allowNonIncrementalDefinition&&c.push(`allow_non_incremental_definition=${o.allowNonIncrementalDefinition}`),c},"getMaterializedViewOptions");return{getLabels:d,getFullName:p,getContainerOptions:T,getViewOptions:u(o=>{let c=[];return o.friendlyName&&c.push(`friendly_name="${o.friendlyName}"`),o.description&&c.push(`description="${w(o.description)}"`),o.expiration&&c.push(`expiration_timestamp=TIMESTAMP "${He(o.expiration)}"`),Array.isArray(o.labels)&&o.labels.length&&c.push(`labels=[
${m(d(o.labels))}
]`),c=[...c,...l(o)],c.length?`
 OPTIONS(
${m(c.join(`,
`))}
)`:""},"getViewOptions"),cleanObject:u(o=>Object.entries(o).filter(([c,E])=>E).reduce((c,[E,_])=>({...c,[E]:_}),{}),"cleanObject"),foreignKeysToString:u(o=>{if(Array.isArray(o)){let c=o.filter(R=>n.get(R,"isActivated",!0)).map(R=>k(R.name.trim())),E=o.filter(R=>!n.get(R,"isActivated",!0)).map(R=>k(R.name.trim())),_=E.length?i(E,{isActivated:!1},!0):"";return c.join(", ")+_}return o},"foreignKeysToString"),foreignActiveKeysToString:u(o=>o.map(c=>k(c.name.trim())).join(", "),"foreignActiveKeysToString")}}});var ie=F((pt,ne)=>{"use strict";var De=u(({index:t,amountOfStatements:n,lastIndexOfActivatedStatement:i,delimiter:m,delimiterForLastActivatedStatement:p})=>t===n-1?"":i===-1?m:t===i?p:m,"getDelimiterForJoiningStatementsBasedOnActivation"),Qe=u(({statementDtos:t})=>{for(let n=t.length-1;n>=0;n--)if((t[n]||{}).isActivated)return n;return-1},"getLastIndexOfActivatedStatement"),Ze=u(({statementDtos:t,delimiter:n=`,
`,delimiterForLastActivatedStatement:i=`
`})=>{let m=Qe({statementDtos:t});return t.map((p,d)=>{let{statement:T}=p,l=De({index:d,amountOfStatements:t.length,lastIndexOfActivatedStatement:m,delimiter:n,delimiterForLastActivatedStatement:i});return T+l}).join("")},"joinActivatedAndDeactivatedStatements");ne.exports={joinActivatedAndDeactivatedStatements:Ze}});var Je=z(),re=D(),N=Z(),{isActivatedPartition:ae,getTablePartitioning:se,getClusteringKey:oe,getTableOptions:le,getColumnSchema:ce,generateViewSelectStatement:We,escapeQuotes:we,clearEmptyStatements:dt,prepareConstraintName:et,wrapByBackticks:B}=q();module.exports=(t,n,i)=>{let{tab:m,commentIfDeactivated:p,hasType:d,checkAllKeysDeactivated:T}=i.require("@hackolade/ddl-fe-utils").general,l=i.require("@hackolade/ddl-fe-utils").assignTemplates,y=i.require("lodash"),{getLabels:C,getFullName:f,getContainerOptions:P,getViewOptions:o,cleanObject:c,foreignKeysToString:E,foreignActiveKeysToString:_}=te()(i),{joinActivatedAndDeactivatedStatements:R}=ie();return{createDatabase({databaseName:e,friendlyName:a,description:s,ifNotExist:r,projectId:g,defaultExpiration:A,customerEncryptionKey:b,labels:S}){return l(N.createDatabase,{name:f(g,e),ifNotExist:r?" IF NOT EXISTS":"",dbOptions:P({friendlyName:a,description:s,defaultExpiration:A,customerEncryptionKey:b,labels:S})})},createTable({name:e,columns:a,dbData:s,description:r,orReplace:g,ifNotExist:A,partitioning:b,partitioningType:S,timeUnitPartitionKey:I,partitioningFilterRequired:x,rangeOptions:$,temporary:O,expiration:M,tableType:L,clusteringKey:me,customerEncryptionKey:pe,labels:ue,friendlyName:de,externalTableOptions:U,foreignKeyConstraints:Te,primaryKey:fe,properties:ye},Ae){let Ee=f(s.projectId,s.databaseName,e),ge=g?"OR REPLACE ":"",Ne=O?"TEMPORARY ":"",_e=A?"IF NOT EXISTS ":"",be=ae({partitioning:b,timeUnitPartitionKey:I,rangeOptions:$}),Ie=se({partitioning:b,partitioningType:S,timeUnitPartitionKey:I,rangeOptions:$,properties:ye}),$e=oe(me,Ae),Y=L==="External",Re=le(m,C)({externalTableOptions:Y?y.omit(U,"autodetect"):null,partitioningFilterRequired:Y?!1:x,customerEncryptionKey:pe,partitioning:b,friendlyName:de,description:r,expiration:M,labels:ue}),Se=Y?"EXTERNAL ":"",Oe=(a||[]).map(h=>({statement:h.column,isActivated:h.isActivated})),V=p(Ie,{isActivated:be}),X=fe.flatMap(h=>h==null?void 0:h.compositePrimaryKey.map(xe=>B(xe.name))),he={statement:X.length?`PRIMARY KEY (${X.join(", ")}) NOT ENFORCED`:"",isActivated:!0},Ce=(Te||[]).map(h=>({statement:p(h.statement,{isActivated:h.isActivated}),isActivated:h.isActivated})),Le=[...Oe,he,...Ce].filter(h=>!!h.statement),Be=R({statementDtos:Le,delimiter:`,
`,delimiterForLastActivatedStatement:`
`});return l(N.createTable,{name:Ee,column_definitions:U!=null&&U.autodetect?"":`(
`+m(Be)+`
)`,orReplace:ge,temporary:Ne,ifNotExist:_e,partitions:V&&!Y?`
`+V:"",clustering:Y?"":$e,external:Se,options:Re})},convertColumnDefinition(e){return{column:p(ce({assignTemplates:l,tab:m,templates:N})(e),{isActivated:e.isActivated}),isActivated:e.isActivated}},createView(e,a,s){let r=f(a.projectId,a.databaseName,e.name),g="",A=e.keys.length&&e.keys.every(O=>!O.isActivated);if(!e.materialized)if(s&&!A){let O=e.keys.filter(L=>L.isActivated).map(L=>L.alias||L.name).filter(Boolean).map(B),M=e.keys.filter(L=>!L.isActivated).map(L=>L.alias||L.name).filter(Boolean).map(B);g=O.join(", ")+(M.length?`/* ${M.join(", ")} */`:"")}else g=e.keys.map(O=>B(O.alias||O.name)).filter(Boolean).join(", ");let b=ae({partitioning:e.partitioning,timeUnitPartitionKey:e.partitioningType,rangeOptions:e.rangeOptions}),S=se({partitioning:e.partitioning,partitioningType:e.partitioningType,timeUnitPartitionKey:e.timeUnitPartitionKey,rangeOptions:e.rangeOptions,properties:e.properties}),I=oe(e.clusteringKey,s),x=p(S,{isActivated:b}),$=l(N.createView,{name:r,materialized:e.materialized?"MATERIALIZED ":"",orReplace:e.orReplace&&!e.materialized?"OR REPLACE ":"",ifNotExist:e.ifNotExist?"IF NOT EXISTS ":"",columns:g.length?`
 (${g})`:"",selectStatement:`
 ${y.trim(e.selectStatement?e.selectStatement:We(f,s&&!A)({columns:e.keys,datasetName:a.databaseName,projectId:a.projectId}))}`,options:o(e),partitions:x?`
`+x:"",clustering:I});return s&&A?p($,{isActivated:!1}):$},createForeignKeyConstraint({name:e,isActivated:a,foreignKey:s,primaryTable:r,primaryKey:g,primaryTableActivated:A,foreignTableActivated:b,primarySchemaName:S},I,x){let $=T(g),O=T(s),M=a&&!$&&!O&&A&&b;return{statement:l(N.createForeignKeyConstraint,{constraintName:e?`CONSTRAINT ${et(e)} `:"",foreignKeys:M?E(s):_(s),primaryTableName:f(null,S,r),primaryKeys:M?E(g):_(g)}),isActivated:M}},getDefaultType(e){return Je[e]},getTypesDescriptors(){return re},hasType(e){return d(re,e)},hydrateColumn({columnDefinition:e,jsonSchema:a,dbData:s}){return{name:e.name,type:e.type,isActivated:e.isActivated,description:a.refDescription||a.description,dataTypeMode:a.dataTypeMode,jsonSchema:a}},hydrateDatabase(e,a){var r;let s=a==null?void 0:a.modelData;return{databaseName:e.name,friendlyName:e.businessName,description:e.description,isActivated:e.isActivated,ifNotExist:e.ifNotExist,projectId:(r=s==null?void 0:s[0])==null?void 0:r.projectID,defaultExpiration:e.enableTableExpiration?e.defaultExpiration:"",customerEncryptionKey:e.encryption==="Customer-managed"?e.customerEncryptionKey:"",labels:Array.isArray(e.labels)?e.labels:[]}},hydrateTable({tableData:e,entityData:a,jsonSchema:s}){var x;let r=a[0],g=((x=a[1])==null?void 0:x.primaryKey)??[],A=r.tableOptions||{},b=(A.uris||[]).map($=>$.uri).filter(Boolean),S=(A.decimal_target_types||[]).map(({value:$})=>$),I={format:A.format,uris:y.isEmpty(b)?void 0:b,decimal_target_types:y.isEmpty(S)?void 0:S,autodetect:A.autodetect};return{...e,name:r.code||r.collectionName,friendlyName:s.title&&s.title!==r.collectionName?s.title:"",description:r.description,orReplace:r.orReplace,ifNotExist:r.ifNotExist,partitioning:r.partitioning,partitioningType:r.partitioningType,timeUnitPartitionKey:r.timeUnitpartitionKey,partitioningFilterRequired:r.partitioningFilterRequired,rangeOptions:r.rangeOptions,temporary:r.temporary,expiration:r.expiration,tableType:r.tableType,clusteringKey:r.clusteringKey,customerEncryptionKey:r.encryption?r.customerEncryptionKey:"",labels:r.labels,primaryKey:g,externalTableOptions:c({AVRO:{...I,...y.pick(A,["require_hive_partition_filter","hive_partition_uri_prefix","reference_file_schema_uri","enable_logical_types"])},CSV:{...I,...y.pick(A,["allow_quoted_newlines","allow_jagged_rows","quote","skip_leading_rows","preserve_ascii_control_characters","null_marker","field_delimiter","encoding","ignore_unknown_values","compression","max_bad_records","require_hive_partition_filter","hive_partition_uri_prefix"])},DATASTORE_BACKUP:{...I,...y.pick(A,["projection_fields"])},GOOGLE_SHEETS:{...I,...y.pick(A,["max_bad_records","sheet_range"])},JSON:{...I,...y.pick(A,["ignore_unknown_values","compression","max_bad_records","require_hive_partition_filter","hive_partition_uri_prefix","json_extension"])},ORC:{...I,...y.pick(A,["require_hive_partition_filter","hive_partition_uri_prefix","reference_file_schema_uri"])},PARQUET:{...I,...y.pick(A,["require_hive_partition_filter","hive_partition_uri_prefix","reference_file_schema_uri","enable_list_inference","enum_as_string"])},CLOUD_BIGTABLE:{...I,uris:[A.bigtableUri],bigtable_options:A.bigtable_options}}[A.format]||{}),properties:(s==null?void 0:s.properties)||{}}},hydrateViewColumn(e){return{name:e.name,tableName:e.entityName,alias:e.alias,isActivated:e.isActivated}},hydrateView({viewData:e,entityData:a,jsonSchema:s}){let r=a[0];return{name:e.name,tableName:e.tableName,keys:e.keys,materialized:r.materialized,orReplace:r.orReplace,ifNotExist:r.ifNotExist,selectStatement:r.selectStatement,labels:r.labels,description:r.description,expiration:r.expiration,friendlyName:r.businessName,partitioning:r.partitioning,partitioningType:r.partitioningType,timeUnitPartitionKey:r.timeUnitpartitionKey,clusteringKey:r.clusteringKey,rangeOptions:r.rangeOptions,refreshInterval:r.refreshInterval,enableRefresh:r.enableRefresh,maxStaleness:r.maxStaleness,allowNonIncrementalDefinition:r.allowNonIncrementalDefinition,properties:(s==null?void 0:s.properties)||{}}},commentIfDeactivated(e,a,s){return p(e,a,s)},dropDatabase(e){return l(N.dropDatabase,{name:e})},alterDatabase({databaseName:e,friendlyName:a,description:s,projectId:r,defaultExpiration:g,customerEncryptionKey:A,labels:b}){return l(N.alterDatabase,{name:f(r,e),dbOptions:P({friendlyName:a,description:s,defaultExpiration:g,customerEncryptionKey:A,labels:b})})},dropTable(e,a,s){return l(N.dropTable,{name:f(s,a,e)})},alterTableOptions({name:e,dbData:a,description:s,partitioning:r,partitioningFilterRequired:g,expiration:A,tableType:b,customerEncryptionKey:S,labels:I,friendlyName:x}){let $=f(a.projectId,a.databaseName,e),O=b==="External",M=le(m,C)({partitioningFilterRequired:O?!1:g,customerEncryptionKey:S,partitioning:r,friendlyName:x,description:s,expiration:A,labels:I});return l(N.alterTable,{name:$,options:M})},alterColumnOptions(e,a,s){return l(N.alterColumnOptions,{description:we(s),tableName:B(e),columnName:B(a)})},alterColumnType(e,a){let s=ce({assignTemplates:l,tab:m,templates:N})(y.pick(a,"type","dataTypeMode","jsonSchema"));return l(N.alterColumnType,{columnName:B(a.name),type:s,tableName:B(a.name)})},alterColumnDropNotNull(e,a){return l(N.alterColumnDropNotNull,{columnName:B(a),tableName:B(a)})},addColumn({column:e},a,s){let r=f(s.projectId,s.databaseName,a);return l(N.alterTableAddColumn,{tableName:r,column:e})},dropColumn(e,a,s){let r=f(s.projectId,s.databaseName,a);return l(N.alterTableDropColumn,{tableName:r,columnName:B(e)})},dropView(e,a,s){return l(N.dropView,{name:f(s,a,e)})},alterView(e,a){let s=f(a.projectId,a.databaseName,e.name);return l(N.alterViewOptions,{materialized:e.materialized?"MATERIALIZED ":"",name:s,options:o(e)})}}};
